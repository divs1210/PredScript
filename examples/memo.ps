interface f;

let xs: isRef = Ref([]);

memoized function f(x: isInt): isRef {
    xs()
    .push($this, x)
    .set(xs, $this)
}

f(5);
f(5); // this call will be skipped
f(6);

assert(xs() == [5, 6]);